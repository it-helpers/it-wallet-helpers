{
  "openapi": "3.0.2",
  "info": {
    "title": "IT Wallet API - OpenID Connect Relying Party",
    "description": "API for the Italian EUDI Wallet implementation profile (version: '0.6.0') <a target=\"blank\" href=\"https://italia.github.io/eudi-wallet-it-docs/v0.6.0/en/\">https://italia.github.io/eudi-wallet-it-docs/v0.6.0/en/</a>",
    "version": "0.6.0"
  },
  "servers": [
    {
      "url": "https://api.server.test/it-wallet-api/v0.6.0",
      "description": "Main (production) server"
    }
  ],
  "paths": {
    "/login": {
      "get": {
        "tags": [
          "RP OIDC"
        ],
        "summary": "The RP OIDC endpoint for requesting a user login to a specific OpenID Provider (OP)",
        "operationId": "login",
        "parameters": [
          {
            "name": "state",
            "in": "cookie",
            "description": "Contains the unique application session identifier at the Wallet Instance side",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd"
          },
          {
            "name": "idphint",
            "in": "query",
            "description": "The identifier of the hinted OpenID Provider (OP), in URL-encoded format",
            "required": true,
            "allowEmptyValue": true,
            "schema": {
              "type": "string"
            },
            "example": "https%3A%2F%2Foidp.example.org"
          },
          {
            "name": "target",
            "in": "query",
            "description": "Redirection URI of the RP, in URL-encoded format, to which the RP /redirect_uri Service redirects the Wallet Instance with the verified RP user_session",
            "required": true,
            "allowEmptyValue": true,
            "schema": {
              "type": "string"
            },
            "example": "https%3A%2F%2Fwallet-rp.ipzs.it%2Fcallback"
          }
        ],
        "responses": {
          "302": {
            "description": "Found  <br> <br/> <b>No content</b> <br> <br/> <b>BINDING HTTP-REDIRECT</b> <br> <br/>=> EXAMPLE Location Header: <br/><br/> https://oidp.example.org/authorize?scope=openid&code_challenge=3Lbh2R_fNV-xGcXEP_Kjm_VZyYoCCY9WomfhKTlDoAuuotmD1ePUZA&code_challenge_method=S256&request=eyJ0eXAiOiJqd3QiLCJhbGciOiJFUzI1NiIsImtpZCI6ImVOTi1nNWk2Q25MS2NsdFFCcDZhYmJpb0dNYnpNNm11VzN2dXh3NnVoODgifQ.eyJjbGllbnRfaWQiOiJodHRwczovL3dhbGxldC1ycC5pcHpzLml0IiwiY29kZV9jaGFsbGVuZ2UiOiIzTGJoMlJfZk5WLXhHY1hFUF9Lam1fVlp5WW9DQ1k5V29tZmhLVGxEb0F1dW90bUQxZVBVWkEiLCJjb2RlX2NoYWxsZW5nZV9tZXRob2QiOiJTMjU2Iiwibm9uY2UiOiJjNjVmYzZmYy1kMDFlLTQyYWUtOWIxNi0xZjFlYTMzYzRiOWMiLCJwcm9tcHQiOiJjb25zZW50IiwicmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9vaWRwLmV4YW1wbGUub3JnL2F1dGhvcml6ZSIsInJlc3BvbnNlX3R5cGUiOiJjb2RlIiwic2NvcGUiOiJvcGVuaWQiLCJhY3JfdmFsdWVzIjoic3BpZCIsImNsYWltcyI6IiIsInN0YXRlIjoiZjM3Y2NkNzQtZmVhMC00N2RmLWI3Y2ItYWZmOGZhNDEyYWM2IiwiaWF0IjoxNzE0OTc5OTcyLCJleHAiOjE3NDY1MTU5NzIsImlzcyI6Imh0dHBzOi8vd2FsbGV0LXJwLmlwenMuaXQiLCJhdWQiOiJodHRwczovL29pZHAuZXhhbXBsZS5vcmciLCJ1aV9sb2NhbGVzIjoiaXQifQ.ba_xnnLz87v0oEnrL3NfOaAF7dbdTGCaekgK_lxYro_-9Z0s03ZLA7y4H3RU9fB49VEGtqFtAahGlz_gwm5u7Q",
            "headers": {
              "Location": {
                "description": "The Location response header indicates the URL of OpenID Provider OP service to redirect the web view of the Wallet Instance to.<br/><br/>This URL present in query string: <ul><li>scope</li><li>code_challenge</li><li>code_challenge_method</li><li>request (a signed JWT containing the Authorization Request signed by the RP)</li></ul>",
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "200": {
            "description": "Ok  <br> <br/> <b>BINDING HTTP-POST</b>, according to Section 4.3.3 of the <a target=\"blank\" href=\"https://openid.net/specs/openid-financial-api-jarm.html#response-mode-form_post.jwt\">JWT Secured Authorization Response Mode for OAuth 2.0 specification</a> <br /> <br />  <i>request</i> parameter of the HTML form contains all the claims required to invoke the athorization endpoint of OpenID Provider:<br /><a target=\"blank\" href=\"https://jwt.io/#debugger-io?token=eyJ0eXAiOiJqd3QiLCJhbGciOiJFUzI1NiIsImtpZCI6ImVOTi1nNWk2Q25MS2NsdFFCcDZhYmJpb0dNYnpNNm11VzN2dXh3NnVoODgifQ.eyJjbGllbnRfaWQiOiJodHRwczovL3dhbGxldC1ycC5pcHpzLml0IiwiY29kZV9jaGFsbGVuZ2UiOiIzTGJoMlJfZk5WLXhHY1hFUF9Lam1fVlp5WW9DQ1k5V29tZmhLVGxEb0F1dW90bUQxZVBVWkEiLCJjb2RlX2NoYWxsZW5nZV9tZXRob2QiOiJTMjU2Iiwibm9uY2UiOiJjNjVmYzZmYy1kMDFlLTQyYWUtOWIxNi0xZjFlYTMzYzRiOWMiLCJwcm9tcHQiOiJjb25zZW50IiwicmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9vaWRwLmV4YW1wbGUub3JnL2F1dGhvcml6ZSIsInJlc3BvbnNlX3R5cGUiOiJjb2RlIiwic2NvcGUiOiJvcGVuaWQiLCJhY3JfdmFsdWVzIjoic3BpZCIsImNsYWltcyI6IiIsInN0YXRlIjoiZjM3Y2NkNzQtZmVhMC00N2RmLWI3Y2ItYWZmOGZhNDEyYWM2IiwiaWF0IjoxNzE0OTc5OTcyLCJleHAiOjE3NDY1MTU5NzIsImlzcyI6Imh0dHBzOi8vd2FsbGV0LXJwLmlwenMuaXQiLCJhdWQiOiJodHRwczovL29pZHAuZXhhbXBsZS5vcmciLCJ1aV9sb2NhbGVzIjoiaXQifQ.ba_xnnLz87v0oEnrL3NfOaAF7dbdTGCaekgK_lxYro_-9Z0s03ZLA7y4H3RU9fB49VEGtqFtAahGlz_gwm5u7Q\">JWT EXAMPLE ON JWT.IO</a>  ",
            "content": {
              "text/html:": {
                "example": "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>\n<html xmlns='http://www.w3.org/1999/xhtml'xml:lang='en'>\n<body onload='document.forms[0].submit()'>\n<noscript>\n<p>\n<strong>Note:</strong> Poiché il tuo browser non supporta JavaScript, devi premere il pulsante Continua una volta per procedere.\n</p>\n</noscript>\n<form action='https://oidp.example.org/authorize' method='post'>\n<div>\n<input type='hidden' name='scope' value='openid'/>\n<input type='hidden' name='code_challenge' value='3Lbh2R_fNV-xGcXEP_Kjm_VZyYoCCY9WomfhKTlDoAuuotmD1ePUZA'/>\n<input type='hidden' name='code_challenge_method' value='S256'/>\n<input type='hidden' name='request' value='eyJ0eXAiOiJqd3QiLCJhbGciOiJFUzI1NiIsImtpZCI6ImVOTi1nNWk2Q25MS2NsdFFCcDZhYmJpb0dNYnpNNm11VzN2dXh3NnVoODgifQ.eyJjbGllbnRfaWQiOiJodHRwczovL3dhbGxldC1ycC5pcHpzLml0IiwiY29kZV9jaGFsbGVuZ2UiOiIzTGJoMlJfZk5WLXhHY1hFUF9Lam1fVlp5WW9DQ1k5V29tZmhLVGxEb0F1dW90bUQxZVBVWkEiLCJjb2RlX2NoYWxsZW5nZV9tZXRob2QiOiJTMjU2Iiwibm9uY2UiOiJjNjVmYzZmYy1kMDFlLTQyYWUtOWIxNi0xZjFlYTMzYzRiOWMiLCJwcm9tcHQiOiJjb25zZW50IiwicmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9vaWRwLmV4YW1wbGUub3JnL2F1dGhvcml6ZSIsInJlc3BvbnNlX3R5cGUiOiJjb2RlIiwic2NvcGUiOiJvcGVuaWQiLCJhY3JfdmFsdWVzIjoic3BpZCIsImNsYWltcyI6IiIsInN0YXRlIjoiZjM3Y2NkNzQtZmVhMC00N2RmLWI3Y2ItYWZmOGZhNDEyYWM2IiwiaWF0IjoxNzE0OTc5OTcyLCJleHAiOjE3NDY1MTU5NzIsImlzcyI6Imh0dHBzOi8vd2FsbGV0LXJwLmlwenMuaXQiLCJhdWQiOiJodHRwczovL29pZHAuZXhhbXBsZS5vcmciLCJ1aV9sb2NhbGVzIjoiaXQifQ.ba_xnnLz87v0oEnrL3NfOaAF7dbdTGCaekgK_lxYro_-9Z0s03ZLA7y4H3RU9fB49VEGtqFtAahGlz_gwm5u7Q'/>\n</div>\n<noscript>\n<div>\n<input type='submit' value='Continua'/>\n</div>\n</noscript>\n</form>\n</body>\n</html>"
              }
            }
          }
        }
      }
    },

    "/redirect_uri": {
      "get": {
        "tags": [
          "RP OIDC"
        ],
        "summary": "Redirect URI Endpoint of RP OIDC",
        "operationId": "redirect_uri",
        "parameters": [
          {
            "name": "state",
            "in": "cookie",
            "description": "Contains the unique application session identifier at the Wallet Instance side",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd"
          },
          {
            "name": "code",
            "in": "header",
            "description": "The authorization code returned in the Authorization Response",
            "required": true,
            "allowEmptyValue": false,
            "schema": {
              "type": "string",
              "example": "SplxlOBeZQQYbYS6WxSbIA"
            }
          },
          {
            "name": "state",
            "in": "header",
            "description": "",
            "required": true,
            "allowEmptyValue": false,
            "schema": {
              "type": "string",
              "example": "fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd"
            }
          },
          {
            "name": "iss",
            "in": "header",
            "description": "",
            "required": true,
            "allowEmptyValue": false,
            "schema": {
              "type": "string",
              "example": "AxjAnj0t5qpRVgR6apZ7gChaPb6y8gNm7CkPd58PD4c"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Found  <br> <br/> <b>No content</b> <br> <br/> <b>BINDING HTTP-REDIRECT</b> <br> <br/> => EXAMPLE Location Header: <br /><br /> https%3A%2F%2Fwallet-rp.ipzs.it%2Fcallback",
            "headers": {
              "Location": {
                "description": "The Location response header indicates the URL  to redirect the Wallet Instance.",
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              },
              "Set-Cookie": {
                "description": "Contains the unique user session identifier at the RP side",
                "schema": {
                  "type": "string",
                  "example": "rp_user_session=avZU92A1ke1goP4NT2JzxiLRPink89Pqw;Path=/;HttpOnly;Secure"
                }
              }
            }
          }
          
        }
      }
    },
    "/callback": {
      "get": {
        "tags": [
          "RP OIDC"
        ],
        "summary": "The RP OIDC endpoint for forwarding authenticated user data to the /callback endpoint of the Authorization Server endpoint",
        "operationId": "callbackRP",
        "parameters": [
          {
            "name": "state",
            "in": "cookie",
            "description": "Contains the unique application session identifier at the Wallet Instance side",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd"
          },
          {
            "name": "rp_user_session",
            "in": "cookie",
            "description": "Contains the unique user session identifier at the RP side",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd"
          }
        ],
        "responses": {
          "302": {
            "description": "Found  <br> <br/> <b>No content</b> <br> <br/> <b>BINDING HTTP-REDIRECT</b> <br> <br/> => EXAMPLE Location Header: <br /><br /> https%3A%2F%2Fstart.wallet.example.org%3Fcode%3DSplxlOBeZQQYbYS6WxSbIA%26state%3DfyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd%26iss%3DAxjAnj0t5qpRVgR6apZ7gChaPb6y8gNm7CkPd58PD4c",
            "headers": {
              "Location": {
                "description": "The Location response header indicates the URL  to redirect the Wallet Instance.<br/><br/>This URL present in query string: <ul><li>code (the authorization code generated by the Authorization Server)</li><li>state</i></li><li>iss</li></ul>",
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "200": {
            "description": "Ok <br> <br/> <b>BINDING HTTP-POST</b>, according to Section 4.3.3 of the <a target=\"blank\" href=\"https://openid.net/specs/openid-financial-api-jarm.html#response-mode-form_post.jwt\">JWT Secured Authorization Response Mode for OAuth 2.0 specification</a> <br/><br/> <a target=\"blank\" href=\"https://jwt.io/#debugger-io?token=eyJraWQiOiIxNzNhMGIxM2VkMTEzNjZmMWMxYTA5YzU3MjAxMzE4YSIsImFsZyI6IkVTMjU2IiwidHlwIjoiSldUIn0.eyJpc3MiOiJBeGpBbmowdDVxcFJWZ1I2YXBaN2dDaGFQYjZ5OGdObTdDa1BkNThQRDRjIiwiY29kZSI6IlNwbHhsT0JlWlFRWWJZUzZXeFNiSUEiLCJzdGF0ZSI6ImZ5WmlPTDlMZjJDZUt1TlQySnp4aUxSRGluazB1UGNkIn0.Uj6JDBuIIEvVUyGhZmX1_efwnTm_pHQuxh6kqZZjoopNK6_zUwzoB37IeppWGieW4b8VEe8VJyVXCcVY4NeHSg\">EXAMPLE JWT</a> included inside the 'response' parameter of the HTML form that contains the authorization code generated by the authorization server (claim 'code') and the same 'state' and 'iss' parameters were present in the PAR Request (in URL-encoded format).",
            "content": {
              "text/html:": {
                "example": "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n<body onload=\"document.forms[0].submit()\">\n<noscript><p><strong>Note:</strong>Poiché il tuo browser non supporta JavaScript, devi premere il pulsante Continua una volta per procedere.</p></noscript>\n<form action=\"https://start.wallet.example.org\" method=\"post\">\n \t<div>\n \t\t<input type=\"hidden\" name=\"response\" value=\"eyJraWQiOiIxNzNhMGIxM2VkMTEzNjZmMWMxYTA5YzU3MjAxMzE4YSIsImFsZyI6IkVTMjU2IiwidHlwIjoiSldUIn0.eyJpc3MiOiJBeGpBbmowdDVxcFJWZ1I2YXBaN2dDaGFQYjZ5OGdObTdDa1BkNThQRDRjIiwiY29kZSI6IlNwbHhsT0JlWlFRWWJZUzZXeFNiSUEiLCJzdGF0ZSI6ImZ5WmlPTDlMZjJDZUt1TlQySnp4aUxSRGluazB1UGNkIn0.Uj6JDBuIIEvVUyGhZmX1_efwnTm_pHQuxh6kqZZjoopNK6_zUwzoB37IeppWGieW4b8VEe8VJyVXCcVY4NeHSg\">\n \t</div>\n \t<noscript><div><input type=\"submit\" value=\"Continua\"></div></noscript>\n</form>\n</body>\n</html>"
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
    }
  }
}